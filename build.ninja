
# -------------------------------------------------------------------- Toolchain

include project-config/toolchains/flags-clang-10.0.0.ninja

# ---------------------------------------------------------------- Configuration


# C files
# gcc -DHAVE_CONFIG_H -I. -DRUNTIME -DFROBTADS -DTC_TARGET_T3 -DTADSNET -DOS_DECLARATIVE_TLS -DVMGLOB_VARS -D_M_IX86_64 -DRUNFAST -I./src -I./tads2 -I./tads3 -I./tads3/unix -DT3_INC_DIR="/usr/local/share/frobtads/tads3/include" -DT3_LIB_DIR="/usr/local/share/frobtads/tads3/lib" -DT3_RES_DIR="/usr/local/share/frobtads/tads3/res" -DT3_LOG_FILE="/tmp/frob.log" -I./src -I./tads2 -I./src -I./tads3 -I./tads3/test -g -O2 -fno-strict-aliasing -pthread -MT tads2/frob-ostzposix.o -MD -MP -MF tads2/.deps/frob-ostzposix.Tpo -c -o tads2/frob-ostzposix.o tads2/ostzposix.c


# -DT3_INC_DIR="/usr/local/share/frobtads/tads3/include" -DT3_LIB_DIR="/usr/local/share/frobtads/tads3/lib" -DT3_RES_DIR="/usr/local/share/frobtads/tads3/res" -DT3_LOG_FILE="/tmp/frob.log"

# -fno-strict-aliasing -pthread

target = wasm-frob

rsrc_flags = -DT3_INC_DIR="\"/usr/local/share/frobtads/tads3/include\"" -DT3_LIB_DIR="\"/usr/local/share/frobtads/tads3/lib\"" -DT3_RES_DIR="\"/usr/local/share/frobtads/tads3/res\"" -DT3_LOG_FILE="\"/tmp/frob.log\""
define_flags = -DHAVE_CONFIG_H -DRUNTIME -DFROBTADS -DTC_TARGET_T3 -DTADSNET -DOS_DECLARATIVE_TLS -DVMGLOB_VARS -D_M_IX86_64 -DRUNFAST
include_flags = -I./ -Isrc -Itads2 -Itads3 -Itads3/unix -Itads3/test
f_flags = $f_flags -fno-strict-aliasing


builddir   = /tmp/build/$target
o_flag     = -O2
c_flags    = $f_flags $o_flag $define_flags $include_flags $rsrc_flags
cpp_flags  = -std=c++2a $f_flags $o_flag -Wall -Wextra -Wpedantic -Wno-unused-parameter -Wno-ignored-qualifiers -Wno-infinite-recursion -Wno-sign-compare -Wno-sometimes-uninitialized -Wno-unused-variable $cpp_inc $include_flags $define_flags $rsrc_flags
link_exec_flags = $link_libcpp_so -lncurses -lcurl -lpthread

# ------------------------------------------------------------------ Build Rules

include project-config/rules.ninja

# ----------------------------------------------------------------------- Source

include project-config/build-graph.ninja

# ----------------------------------------------------------------------- Target

default $target
